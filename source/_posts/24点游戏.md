---
title: 24点游戏
date: 2017-12-22 21:39:59
tags: [算法,C]
toc: true
---

## 问题描述
24点是一种老少咸宜的游戏，它的具体玩法如下：
给玩家4张牌，每张牌的面值在1~13之间，允许其中有数值相同的牌。采用加、减、乘、除四则运算，允许中间运算存在小数，并且可以使用括号，但每张牌只能使用一次，尝试构造一个表达式，使其运算结果为24。
请你根据上述游戏规则构造一个24点游戏的算法，要求如下：
输入：n1,n2,n3,n4
输出：若能得到运算结果为24，则输出一个对应的运算表达式；若不能，则输出“No answer”
<!-- more -->
输入样例：

	11,8,3,5
输出样例：
	
	（11-8）*（3+5）=24
输入样例：
	
	3,8,8,10
输出样例：
	
	(8*10-8)/3=24
输入样例：
	
	1,1,1,1
输出样例：
	
	No answer

[代码地址](https://github.com/zjko/Algorithm/blob/master/%E8%93%9D%E6%A1%A5%E6%9D%AF/24%E7%82%B9.cpp)
## 问题分析
这个是一个全排列的混合问题。由于问题空间十分有限，因此可以采用暴力法，找出所有情况。

### 运算映射
使用数字0、1、2、3分别表示+、-、×、÷，方便进行全遍历。
通过映射函数f来将不同的数字映射成相应的运算（需要注意除数不为零的情况）。
通过p函数再将对应数字映射成对应的符号。

### 全排列
递归法求全排列
先固定一个元素，然后让后面的元素与前面元素逐一交换后再进行固定，递归进行。当固定到最后一个元素的时候，此时的序列作为一种排列。
> 注意：#define s(x,y) x+=y;y=x-y;x-=y; 为宏函数，功能是将x，y的值互换

### 运算顺序
由于本题运算顺序的可能性很少，只有四种，为了快速得出结果，笔者便直接手动画出了所有运算顺序的可能性。大家可以自己想想找出所有运算顺序的算法哦。

